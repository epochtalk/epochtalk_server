<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.6">
    <meta name="project" content="epochtalk_server v0.1.0">

    <title>EpochtalkServer.Models.Role â€” epochtalk_server v0.1.0</title>
    <link rel="stylesheet" href="dist/html-elixir-5CLCQQME.css" />

    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-X7YVL3G2.js"></script>
    <script src="dist/sidebar_items-2B5768A3.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-PLW5RNNI.js"></script>


  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="api-reference.html" class="sidebar-projectName" translate="no">
epochtalk_server
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.1.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


  <span translate="no">EpochtalkServer.Models.Role</span> 
  <small class="app-vsn" translate="no">(epochtalk_server v0.1.0)</small>

</h1>


  <section id="moduledoc">
<p><code class="inline">Role</code> model, for performing actions relating to user roles</p>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:t/0" translate="no">t()</a>

        </div>

      </div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#all/0" translate="no">all()</a>

        </div>

          <div class="summary-synopsis"><p>Returns every <code class="inline">Role</code> record in the database</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#by_lookup/1" translate="no">by_lookup(lookups)</a>

        </div>

          <div class="summary-synopsis"><p>Returns a <code class="inline">Role</code> or list of roles, for specified lookup(s)</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#by_user_id/1" translate="no">by_user_id(user_id)</a>

        </div>

          <div class="summary-synopsis"><p>Returns a list containing a user's roles</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#changeset/2" translate="no">changeset(role, attrs \\ %{})</a>

        </div>

          <div class="summary-synopsis"><p>Create generic changeset for the <code class="inline">Role</code> model</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_banned_role_id/0" translate="no">get_banned_role_id()</a>

        </div>

          <div class="summary-synopsis"><p>Returns id for the <code class="inline">banned</code> <code class="inline">Role</code></p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_default/0" translate="no">get_default()</a>

        </div>

          <div class="summary-synopsis"><p>Returns default <code class="inline">Role</code>, for base installation this is the <code class="inline">user</code> role, if <code class="inline">:epochtalk_server[:frontend_config][&quot;newbie_enabled&quot;]</code>
configuration is set to true, then <code class="inline">newbie</code> is the default role.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_masked_permissions/1" translate="no">get_masked_permissions(roles)</a>

        </div>

          <div class="summary-synopsis"><p>Takes in list of user's roles, and returns an xored map of all <code class="inline">Role</code> permissions</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_newbie_role_id/0" translate="no">get_newbie_role_id()</a>

        </div>

          <div class="summary-synopsis"><p>Returns id for the <code class="inline">newbie</code> <code class="inline">Role</code></p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#handle_banned_user_role/1" translate="no">handle_banned_user_role(user)</a>

        </div>

          <div class="summary-synopsis"><p>The <code class="inline">banned</code> <code class="inline">Role</code> takes priority over all other roles
If a <code class="inline">User</code> is banned, only return the <code class="inline">banned</code> <code class="inline">Role</code></p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#handle_empty_user_roles/1" translate="no">handle_empty_user_roles(user)</a>

        </div>

          <div class="summary-synopsis"><p>Default role is not stored in the database, in order to save space
checks the role array on the user model
if roles array is empty, sets the default role by appending it</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#insert/1" translate="no">insert(role)</a>

        </div>

          <div class="summary-synopsis"><p>Inserts a new <code class="inline">Role</code> into the database</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#set_permissions/2" translate="no">set_permissions(id, permissions)</a>

        </div>

          <div class="summary-synopsis"><p>Updates the permissions of an existing <code class="inline">Role</code> in the database</p></div>

      </div>

  </div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Types
    </h1>
    <div class="types-list">
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">t()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: %EpochtalkServer.Models.Role{
  __meta__: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  created_at: <a href="https://hexdocs.pm/elixir/NaiveDateTime.html#t:t/0">NaiveDateTime.t</a>() | nil,
  description: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil,
  highlight_color: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil,
  id: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | nil,
  lookup: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil,
  name: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil,
  permissions: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | nil,
  priority: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | nil,
  priority_restrictions: [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()] | nil,
  updated_at: <a href="https://hexdocs.pm/elixir/NaiveDateTime.html#t:t/0">NaiveDateTime.t</a>() | nil
}</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="all/0">

  <div class="detail-header">
    <a href="#all/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">all()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> all() :: [<a href="#t:t/0">t</a>()] | []</pre>

      </div>

<p>Returns every <code class="inline">Role</code> record in the database</p>
  </section>
</section>
<section class="detail" id="by_lookup/1">

  <div class="detail-header">
    <a href="#by_lookup/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">by_lookup(lookups)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> by_lookup(lookup_or_lookups :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | [<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()]) ::
  <a href="#t:t/0">t</a>() | [<a href="#t:t/0">t</a>()] | [] | nil</pre>

      </div>

<p>Returns a <code class="inline">Role</code> or list of roles, for specified lookup(s)</p>
  </section>
</section>
<section class="detail" id="by_user_id/1">

  <div class="detail-header">
    <a href="#by_user_id/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">by_user_id(user_id)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> by_user_id(user_id :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: [<a href="#t:t/0">t</a>()]</pre>

      </div>

<p>Returns a list containing a user's roles</p>
  </section>
</section>
<section class="detail" id="changeset/2">

    <span id="changeset/1"></span>

  <div class="detail-header">
    <a href="#changeset/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">changeset(role, attrs \\ %{})</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> changeset(role :: <a href="#t:t/0">t</a>(), attrs :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | nil) :: <a href="https://hexdocs.pm/ecto/3.9.1/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()</pre>

      </div>

<p>Create generic changeset for the <code class="inline">Role</code> model</p>
  </section>
</section>
<section class="detail" id="get_banned_role_id/0">

  <div class="detail-header">
    <a href="#get_banned_role_id/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_banned_role_id()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_banned_role_id() :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>() | nil</pre>

      </div>

<p>Returns id for the <code class="inline">banned</code> <code class="inline">Role</code></p>
  </section>
</section>
<section class="detail" id="get_default/0">

  <div class="detail-header">
    <a href="#get_default/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_default()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default() :: <a href="#t:t/0">t</a>() | nil</pre>

      </div>

<p>Returns default <code class="inline">Role</code>, for base installation this is the <code class="inline">user</code> role, if <code class="inline">:epochtalk_server[:frontend_config][&quot;newbie_enabled&quot;]</code>
configuration is set to true, then <code class="inline">newbie</code> is the default role.</p>
  </section>
</section>
<section class="detail" id="get_masked_permissions/1">

  <div class="detail-header">
    <a href="#get_masked_permissions/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_masked_permissions(roles)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_masked_permissions(roles :: [<a href="#t:t/0">t</a>()]) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()</pre>

      </div>

<p>Takes in list of user's roles, and returns an xored map of all <code class="inline">Role</code> permissions</p>
  </section>
</section>
<section class="detail" id="get_newbie_role_id/0">

  <div class="detail-header">
    <a href="#get_newbie_role_id/0" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_newbie_role_id()</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_newbie_role_id() :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>() | nil</pre>

      </div>

<p>Returns id for the <code class="inline">newbie</code> <code class="inline">Role</code></p>
  </section>
</section>
<section class="detail" id="handle_banned_user_role/1">

  <div class="detail-header">
    <a href="#handle_banned_user_role/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">handle_banned_user_role(user)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> handle_banned_user_role(
  user_or_roles :: <a href="EpochtalkServer.Models.User.html#t:t/0">EpochtalkServer.Models.User.t</a>() | [<a href="#t:t/0">t</a>()]
) ::
  <a href="EpochtalkServer.Models.User.html#t:t/0">EpochtalkServer.Models.User.t</a>() | [<a href="#t:t/0">t</a>()]</pre>

      </div>

<p>The <code class="inline">banned</code> <code class="inline">Role</code> takes priority over all other roles
If a <code class="inline">User</code> is banned, only return the <code class="inline">banned</code> <code class="inline">Role</code></p><p>This helper needs to be called anywhere that modifies a user's ban
and is expected to return the updated user's roles.</p>
  </section>
</section>
<section class="detail" id="handle_empty_user_roles/1">

  <div class="detail-header">
    <a href="#handle_empty_user_roles/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">handle_empty_user_roles(user)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> handle_empty_user_roles(user :: <a href="EpochtalkServer.Models.User.html#t:t/0">EpochtalkServer.Models.User.t</a>()) ::
  <a href="EpochtalkServer.Models.User.html#t:t/0">EpochtalkServer.Models.User.t</a>()</pre>

      </div>

<p>Default role is not stored in the database, in order to save space
checks the role array on the user model
if roles array is empty, sets the default role by appending it</p><p>This helper needs to be called anywhere that modifies a user's roles
and is expected to return the updated user's roles.</p>
  </section>
</section>
<section class="detail" id="insert/1">

  <div class="detail-header">
    <a href="#insert/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">insert(role)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> insert(role_or_roles :: <a href="#t:t/0">t</a>() | [%{}]) ::
  {:ok, role :: <a href="#t:t/0">t</a>()}
  | {<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), nil | [<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()]}
  | {:error, <a href="https://hexdocs.pm/ecto/3.9.1/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Inserts a new <code class="inline">Role</code> into the database</p>
  </section>
</section>
<section class="detail" id="set_permissions/2">

  <div class="detail-header">
    <a href="#set_permissions/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_permissions(id, permissions)</h1>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set_permissions(id :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>(), permissions_attrs :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, role :: <a href="#t:t/0">t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.9.1/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Updates the permissions of an existing <code class="inline">Role</code> in the database</p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.6) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
